<section id="banner">
    <div class="content">
        <div class="post-card" data-post-id="{{ post.id }}">
            <header>
                <div style="display: flex; justify-content: space-between;">
                    <p><strong>{{ post.user.name }}</strong> <span class="text-lowercase">@{{ post.user.username }}</span> Â· {{ post.datetime|date('Y-m-d H:i') }}</p>
                </div>
                <h2>{{ post.title }}</h2>
                <p class="text-lowercase">
                    {% for hashtag in post.hashtags %}
                        #{{ hashtag.name }}{% if not loop.last %} {% endif %}
                    {% endfor %}
                </p>
            </header>
            <p>{{ post.content }}</p>
            <ul class="actions">
                {% if is_granted('ROLE_STUDENT') or is_granted('ROLE_CHEF') %}
                    <li><a href="#" class="button big">Let's cook!</a></li>
                {% endif %}
            </ul>
        </div>

        <p>
            Likes:
            {% if app.user %}
                <a href="{{ path('post_like', { 'id': post.id }) }}" class="like-btn" data-post-id="{{ post.id }}">
                    <i class="bi bi-heart{% if post.isLikedByUser(app.user) %}-fill{% endif %}"></i> <span>{{ post.numLikes }}</span>
                </a>
            {% else %}
                <span class="like-btn" data-post-id="{{ post.id }}">
                    <i class="bi bi-heart"></i> <span>{{ post.numLikes }}</span>
                </span>
            {% endif %}
            Views: <i class="bi bi-eye"></i> {{ post.numViews }}
        </p>
    </div>

    <span class="image object post-img">
         {% if post.imgUrl %}
             <img src="{{ post.imgUrl }}" alt="{{ post.title }}" />
         {% endif %}
    </span>

    {% if app.user %}
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <div>
                <button class="menu-btn icn-btn" id="dropdown-btn-{{ post.id }}"><i class="bi bi-three-dots-vertical"></i></button>
                <div class="dropdown" id="dropdown-{{ post.id }}">
                    <a href="#">
                        <i class="bi bi-pencil"></i>
                        Edit
                    </a>
                    <a href="#" class="delete-btn" data-post-id="{{ post.id }}">
                        <i class="bi bi-trash"></i>
                        Delete
                    </a>
                </div>
            </div>
            <div>
                <form action="{{ path('saved_posts_add', {'id': post.id}) }}" method="POST" id="save-post-form-{{ post.id }}">
                    <button type="submit" style="display:none;">Guardar post</button> <!-- Form hidden -->
                </form>
                <form action="{{ path('saved_posts_add', {'id': post.id}) }}" method="POST" id="save-post-toggle-form-{{ post.id }}">
                    <button type="submit" style="display:none;">Toggle Save</button>
                </form>
                <i class="bi bi-bookmark{% if app.user and post.isSavedByUser(app.user) %}-fill{% endif %}"
                   onclick="document.getElementById('save-post-toggle-form-{{ post.id }}').submit();"></i>
                <span id="save-text-{{ post.id }}">
                    {% if app.user and post.isSavedByUser(app.user) %}
                        Saved
                    {% else %}
                        Save
                    {% endif %}
                </span>
            </div>
        </div>
    {% endif %}
</section>